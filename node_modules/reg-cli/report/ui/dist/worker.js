!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s="./src/worker-main.ts")}({"./node_modules/fuzzy-search/dist/FuzzySearch.js":function(e,t,n){"undefined"!=typeof window&&window,e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.r(t);var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,(n=[{key:"getDescendantProperty",value:function(t,n){var r,o,s,i,a,c,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(n){if(-1===(s=n.indexOf("."))?r=n:(r=n.slice(0,s),o=n.slice(s+1)),null!=(i=t[r]))if(o||"string"!=typeof i&&"number"!=typeof i)if("[object Array]"===Object.prototype.toString.call(i))for(a=0,c=i.length;a<c;a++)e.getDescendantProperty(i[a],o,u);else o&&e.getDescendantProperty(i,o,u);else u.push(i)}else u.push(t);return u}}])&&r(t,n),e}();function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.d(t,"default",function(){return i});var i=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Array.isArray(n)||(r=n,n=[]),this.haystack=t,this.keys=n,this.options=Object.assign({caseSensitive:!1,sort:!1},r)}var t,n,r;return t=e,r=[{key:"isMatch",value:function(e,t,n){n||(e=e.toLocaleLowerCase(),t=t.toLocaleLowerCase());for(var r=t.split(""),o=[],s=0,i=0;i<r.length;i++){var a=r[i];if(-1===(s=e.indexOf(a,s)))return!1;o.push(s),s++}return e===t?1:o.reduce(function(e,t){return e+t},2)}}],(n=[{key:"search",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(""===t)return this.haystack;for(var n=[],r=0;r<this.haystack.length;r++){var s=this.haystack[r];if(0===this.keys.length){var i=e.isMatch(s,t,this.options.caseSensitive);i&&n.push({item:s,score:i})}else for(var a=0;a<this.keys.length;a++){for(var c=o.getDescendantProperty(s,this.keys[a]),u=!1,l=0;l<c.length;l++){var f=e.isMatch(c[l],t,this.options.caseSensitive);if(f){u=!0,n.push({item:s,score:f});break}}if(u)break}}return this.options.sort&&n.sort(function(e,t){return e.score-t.score}),n.map(function(e){return e.item})}}])&&s(t.prototype,n),r&&s(t,r),e}()}]).default},"./node_modules/x-img-diff-js/package.json":function(e){e.exports=JSON.parse('{"name":"x-img-diff-js","version":"0.3.5","main":"src/index.js","description":"compare 2 images considering into translation","scripts":{"build":"docker-compose run --rm emcc && npm run build:demo","test":"node test/test_node.js","build:demo":"cp -rf build demo","start":"cd demo; http-server -p 8000","gen:postjs":"babel binding-gen/post.js > bindings/post.js","deploy":"npm run build:demo && gh-pages -d demo"},"repository":{"type":"git","url":"git+https://github.com/reg-viz/x-img-diff-js.git"},"author":"Quramy","license":"MIT","bugs":{"url":"https://github.com/reg-viz/x-img-diff-js/issues"},"homepage":"https://github.com/reg-viz/x-img-diff-js#readme","devDependencies":{"babel-cli":"^6.26.0","babel-core":"^6.26.0","babel-preset-es2015":"^6.24.1","gh-pages":"^1.0.0","http-server":"^0.10.0","pngjs":"^3.3.0"}}')},"./src/worker-main.ts":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/fuzzy-search/dist/FuzzySearch.js"),o=n.n(r);function s(e,t,n){const r="wasm-cache",o="wasm-cache";async function s(){const e=await fetch(t),r=await e.arrayBuffer();return await WebAssembly.instantiate(r,n)}return new Promise((t,n)=>{const s=indexedDB.open(r,e);s.onerror=n.bind(null,"Error opening wasm cache database"),s.onsuccess=()=>{t(s.result)},s.onupgradeneeded=e=>{const t=s.result;t.objectStoreNames.contains(o)&&(console.log("Clearing out version ".concat(e.oldVersion," wasm cache")),t.deleteObjectStore(o)),console.log("Creating version ".concat(e.newVersion," wasm cache")),t.createObjectStore(o)}}).then(e=>(function(e){return new Promise((n,r)=>{const s=e.transaction([o]).objectStore(o).get(t);s.onerror=r.bind(null,"Error getting wasm module ".concat(t)),s.onsuccess=()=>{s.result?n(s.result):r("Module ".concat(t," was not found in wasm cache"))}})})(e).then(e=>(console.log("Found ".concat(t," in wasm cache")),WebAssembly.instantiate(e,n)),n=>(console.log(n),s().then(n=>(setTimeout(()=>(function(e,n){const r=e.transaction([o],"readwrite").objectStore(o);try{const e=r.put(n,t);e.onerror=e=>{console.log("Failed to store in wasm cache: ".concat(e))},e.onsuccess=()=>{console.log("Successfully stored ".concat(t," in wasm cache"))}}catch(e){console.warn("An error was thrown... in storing wasm cache..."),console.warn(e)}})(e,n.module),0),n.instance)))),e=>(console.log(e),s().then(e=>e.instance)))}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let a;function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(n,!0).forEach(function(t){l(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(e){e.INIT_CALC="init",e.REQUEST_CALC="req_calc",e.RESULT_CALC="res_calc",e.REQUEST_FILTER="req_filter",e.RESULT_FILTER="res_filter"}(a||(a={}));const f=n("./node_modules/x-img-diff-js/package.json").version,d=self;let p=!1,h=null;const m=e=>{let{payload:{raw:t,img1:n,img2:r,actualSrc:o,expectedSrc:s,seq:i}}=e;const c=d.Module.detectDiff(d.Module,n,r,{});d.postMessage({type:a.RESULT_CALC,payload:{seq:i,raw:t,actualSrc:o,expectedSrc:s,result:u({},c,{images:[{width:n.width,height:n.height},{width:r.width,height:r.height}]})}})};d.Module=new class{constructor(e){let{init:t,version:n,wasmUrl:r}=e;i(this,"_init",void 0),i(this,"_version",void 0),i(this,"_wasmUrl",void 0),this._init=t,this._version=n,this._wasmUrl=r}locateFile(e){return self.location.pathname.replace(/\[^\/]*$/,"/")+e}instantiateWasm(e,t){return s(this._version,this._wasmUrl,e).then(e=>t(e)),{}}onInit(e){this._init=e}onRuntimeInitialized(){if(this._init)return this._init(this)}}({version:function(e){const[,t,n,r]=e.match(/^(\d*)\.(\d*)\.(\d*)/);return 1e4*+t+100*+n+ +r}(f),wasmUrl:d.wasmUrl,init:()=>{p=!0,null!=h&&m(h),d.postMessage({type:a.INIT_CALC})}}),d.addEventListener("message",e=>{let{data:t}=e;switch(console.log("Received: ",t),t.type){case a.REQUEST_CALC:p?m(t):h=t;break;case a.REQUEST_FILTER:(e=>{let{payload:{input:t,newItems:n,passedItems:r,failedItems:s,deletedItems:i}}=e;if(!t)return d.postMessage({type:a.RESULT_FILTER,payload:{newItems:n,passedItems:r,failedItems:s,deletedItems:i}});const c=["name"],u={caseSensitive:!0},l=new o.a(n,c,u),f=new o.a(r,c,u),p=new o.a(s,c,u),h=new o.a(i,c,u);d.postMessage({type:a.RESULT_FILTER,payload:{newItems:l.search(t),passedItems:f.search(t),failedItems:p.search(t),deletedItems:h.search(t)}})})(t)}})}});